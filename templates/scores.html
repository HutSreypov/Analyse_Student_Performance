{% extends "base.html" %}
{% block title %}Scores{% endblock %}
{% block content %}
<h2>Scores</h2>

<!-- Add Score Form -->
<form method="post" action="{{ url_for('score_bp.add_score') }}" class="row g-2 mb-3">
  <div class="col-md-3">
    <select name="student_id" class="form-select" required>
      <option value="">Select student</option>
      {% for st in students %}
      <option value="{{ st.id }}">{{ st.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-3">
    <select name="subject_id" class="form-select" required>
      <option value="">Select subject</option>
      {% for sub in subjects %}
      <option value="{{ sub.id }}">{{ sub.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-1"><input class="form-control" name="midterm" placeholder="Mid"></div>
  <div class="col-md-1"><input class="form-control" name="assignment" placeholder="Assign"></div>
  <div class="col-md-1"><input class="form-control" name="final" placeholder="Final"></div>
  <div class="col-md-1"><button class="btn btn-success">Add</button></div>
</form>

<!-- Scores Table -->
<table class="table">
  <thead>
    <tr>
      <th>Student</th>
      <th>Subject</th>
      <th>Mid</th>
      <th>Assign</th>
      <th>Final</th>
      <th>Total</th>
      <th>Grade</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for s in scores %}
    <tr>
      <td>{{ s.student_name }}</td>
      <td>{{ s.subject_name }}</td>
      <td>{{ s.midterm }}</td>
      <td>{{ s.assignment }}</td>
      <td>{{ s.final }}</td>
      <td>{{ s.total }}</td>
      <td>{{ s.grade }}</td>
      <td>
        <!-- Edit Button -->
        <a href="{{ url_for('score_bp.edit_score', score_id=s.id) }}" class="btn btn-sm btn-outline-primary">Edit</a>
        <!-- Delete Button -->
        <a href="{{ url_for('score_bp.delete_score', score_id=s.id) }}" class="btn btn-sm btn-outline-danger" 
           onclick="return confirm('Are you sure you want to delete this score?');">Delete</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
